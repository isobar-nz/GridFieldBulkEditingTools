{"version":3,"sources":["webpack:///webpack/bootstrap 38d72441d89f815299d4","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/js/bulkTools.js","webpack:///./client/src/js/manager.js","webpack:///./client/src/js/managerBulkEditingForm.js","webpack:///./client/src/js/uploader.js","webpack:///external \"jQuery\"","webpack:///external \"Injector\"","webpack:///external \"i18n\""],"names":["require","jQuery","entwine","$","window","bulkTools","gridfieldRefresh","$gridfield","data","isError","isDestructive","removeGridFieldRows","records","success","updateGridFieldRows","failedGridFieldRows","failed","getGridFieldRow","record","find","id","class","cleanGridFieldRow","$row","removeClass","removeAttr","forEach","addClass","fadeOut","delay","reload","attr","message","remove","$newRow","row","length","replaceWith","prepend","onmatch","$parent","parents","$tr","targets","$target","join","index","newIndex","each","targetIndex","Element","idx","eq","insertAfter","onmouseover","onmouseout","onclick","e","cb","target","prop","onunmatch","state","trigger","getSelectRecordsID","map","parseInt","get","onchange","value","val","$btn","config","configKey","configData","buttonClasses","icon","$img","destructive","getActionURL","action","url","cacheBuster","Date","getTime","newUrl","split","newAction","ids","doBulkAction","$msg","inputData","alert","i18n","_t","confirm","xhr","ajax","type","context","always","returnData","responseText","JSON","parse","html","isWarning","location","href","toggleFields","$this","hasClass","click","bulkUploadFieldAttach","payload","$uploadField","fieldId","schema","attachFileEndpoint","method","fileID","file","done","bulkUploadFieldUpload","json","bulkUploadFieldReducer","originalReducer","indexOf","document","addEventListener","Injector","transform","updater","reducer"],"mappings":"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","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 38d72441d89f815299d4","require('../js/bulkTools');\nrequire('../js/manager');\nrequire('../js/managerBulkEditingForm');\nrequire('../js/uploader');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","/* global window */\nimport jQuery from 'jquery';\n\njQuery.entwine('ss', ($) => {\n  /**\n   * Handles Gridfield updates after a bulk action/upload\n   */\n  window.bulkTools = {\n    gridfieldRefresh($gridfield, data) {\n      if (!data.isError) {\n        if (data.isDestructive) {\n          this.removeGridFieldRows($gridfield, data.records.success);\n        } else {\n          this.updateGridFieldRows($gridfield, data.records.success);\n        }\n        // failed rows\n        this.failedGridFieldRows($gridfield, data.records.failed);\n      }\n    },\n\n    // return the gridfield row node for a specific record\n    getGridFieldRow($gridfield, record) {\n      return $gridfield.find(`.ss-gridfield-item[data-id=\"${record.id}\"][data-class=\"${record.class}\"]`);\n    },\n\n    // remove all bulk tools class and attributes from the row\n    cleanGridFieldRow($row) {\n      return $row.removeClass('bt-deleted bt-failed bt-updated').removeAttr('bt-error');\n    },\n\n    // mark all affected gridfield rows as deleted\n    removeGridFieldRows($gridfield, records) {\n      records.forEach(function (record) {\n        const $row = this.getGridFieldRow($gridfield, record);\n        $row.addClass('bt-deleted').fadeOut(2000);\n      }, this);\n      $gridfield.entwine('.').entwine('ss').delay(2000).reload();\n    },\n\n    // mark all affected gridfield rows as failed\n    failedGridFieldRows($gridfield, records) {\n      records.forEach(function (record) {\n        const $row = this.getGridFieldRow($gridfield, record);\n        $row.addClass('bt-failed').attr('bt-error', record.message);\n        // pseudo element absolute pos don't work in TR, so we'll have to find some\n        // JS way to show the bt-error content..\n      }, this);\n    },\n\n    // update rows with new content\n    updateGridFieldRows($gridfield, records) {\n      $gridfield.find('.ss-gridfield-item.ss-gridfield-no-items').remove();\n      records.forEach(function (record) {\n        const $row = this.getGridFieldRow($gridfield, record);\n        const $newRow = $(record.row).addClass('bt-updated');\n        // replace existing or add new?\n        if ($row.length === 1) {\n          $row.replaceWith($newRow);\n        } else {\n          $gridfield.find('.ss-gridfield-items').prepend($newRow);\n        }\n      }, this);\n    },\n\n    // removes an item from the upload item\n    // this is bad! can't dispatch within Reducer\n    // so it's commentted until actions are written\n    /*\n    removeUploadItem: function ($gridfield, queueIndex, fileID)\n    {\n      // we use queueIndex for uploads since the input value will not have been changed yet\n      // and we can't watch for change event on hidden input\n      if (fileID) {\n        $gridfield.find('.uploadfield-item')\n          .find('input[value=\"'+fileID+'\"]')\n          .siblings('button.uploadfield-item__remove-btn')\n          .trigger('click');\n      } else if (queueIndex) {\n        $gridfield.find('.uploadfield-item')\n          .eq(queueIndex-1)\n          .find('button.uploadfield-item__remove-btn')\n          .trigger('click');\n      }\n    } */\n  };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/js/bulkTools.js","/* global window, alert, confirm */\nimport jQuery from 'jquery';\nimport i18n from 'i18n';\n\njQuery.entwine('colymba', ($) => {\n  /**\n   * Makes sure the component is above the headers\n   */\n  $('.bulkManagerOptions').entwine({\n    onmatch() {\n      const $parent = this.parents('thead');\n      const $tr = $parent.find('tr');\n\n      const targets = ['.filter-header', '.sortable-header'];\n      const $target = $parent.find(targets.join(','));\n\n      const index = $tr.index(this);\n      let newIndex = $tr.length - 1;\n\n      $target.each((targetIndex, Element) => {\n        const idx = $tr.index(Element);\n        if (idx < newIndex) {\n          newIndex = idx;\n        }\n      });\n\n      if (index > newIndex) {\n        $tr.eq(newIndex).insertAfter($(this));\n      }\n    },\n  });\n\n\n  /**\n   * Bulkselect table cell behaviours\n   */\n  $('td.col-bulkSelect').entwine({\n    onmouseover() {\n      // disable default row click behaviour -> avoid navigation to edit form when\n      // clicking the checkbox\n      $(this).parents('.ss-gridfield-item').find('.edit-link').removeClass('edit-link')\n        .addClass('tempDisabledEditLink');\n    },\n    onmouseout() {\n      // re-enable default row click behaviour\n      $(this).parents('.ss-gridfield-item').find('.tempDisabledEditLink').addClass('edit-link')\n        .removeClass('tempDisabledEditLink');\n    },\n    onclick(e) {\n      // check/uncheck checkbox when clicking cell\n      const cb = $(e.target).find('input');\n      if (!$(cb).prop('checked')) {\n        $(cb).prop('checked', true);\n      } else {\n        $(cb).prop('checked', false);\n      }\n    }\n  });\n\n  /**\n   * Individual select checkbox behaviour\n   */\n  $('td.col-bulkSelect input').entwine({\n    onmatch() {\n    },\n    onunmatch() {\n    },\n    onclick() {\n      $(this).parents('.grid-field__table').find('input.bulkSelectAll').prop('checked', '');\n    }\n  });\n\n  /**\n   * Bulkselect checkbox behaviours\n   */\n  $('input.bulkSelectAll').entwine({\n    onclick() {\n      const state = $(this).prop('checked');\n      $(this).parents('.grid-field__table')\n        .find('td.col-bulkSelect input')\n        .prop('checked', state)\n        .trigger('change');\n    },\n    getSelectRecordsID() {\n      return $(this).parents('.grid-field__table')\n        .find('td.col-bulkSelect input:checked')\n        .map(function () {\n          return parseInt($(this).data('record'), 10);\n        })\n        .get();\n    }\n  });\n\n\n  /**\n   * Bulk action dropdown behaviours\n   */\n  $('select.bulkActionName').entwine({\n    onchange() {\n      const value = $(this).val();\n      const $parent = $(this).parents('.bulkManagerOptions');\n      const $btn = $parent.find('.doBulkActionButton');\n      const config = $btn.data('config');\n\n      $.each(config, (configKey, configData) => {\n        if (configKey !== value) {\n          $btn.removeClass(configData.buttonClasses);\n        }\n      });\n\n      if (!value) {\n        $btn.addClass('disabled');\n        return;\n      }\n\n      $btn.removeClass('disabled');\n\n      $btn.addClass(config[value].buttonClasses).addClass('btn-outline-secondary');\n\n      if (config[value].icon) {\n        const $img = $btn.find('img');\n\n        if ($img.length) {\n          $img.attr('src', config[value].icon);\n        } else {\n          $btn.prepend(`<img src=\"${config[value].icon}\" alt=\"\" />`);\n        }\n      } else {\n        $btn.find('img').remove();\n      }\n\n\n      if (config[value].destructive) {\n        $btn.addClass('btn-outline-danger');\n      } else {\n        $btn.removeClass('btn-outline-danger');\n      }\n    }\n  });\n\n\n  /**\n   * bulk action button behaviours\n   */\n  $('.doBulkActionButton').entwine({\n    getActionURL(action, url) {\n      const cacheBuster = new Date().getTime();\n      let newUrl = url.split('?');\n\n      let newAction = '';\n      if (action) {\n        newAction = `/${action}`;\n      }\n\n      if (newUrl[1]) {\n        newUrl = `${newUrl[0] + newAction}?${newUrl[1]}&cacheBuster=${cacheBuster}`;\n      } else {\n        newUrl = `${newUrl[0] + newAction}?cacheBuster=${cacheBuster}`;\n      }\n      return newUrl;\n    },\n    onclick() {\n      const $parent = $(this).parents('.bulkManagerOptions');\n      const action = $parent.find('select.bulkActionName').val();\n      const ids = $(this).parents('.bulkManagerOptions').find('input.bulkSelectAll:first').getSelectRecordsID();\n\n      this.doBulkAction(action, ids);\n    },\n\n    doBulkAction(action, ids) {\n      const { bulkTools } = window;\n\n      const $parent = $(this).parents('.bulkManagerOptions');\n      const $btn = $parent.find('a.doBulkActionButton');\n      const $msg = $parent.find('.message');\n\n      const config = $btn.data('config');\n      let url = this.getActionURL(action, $(this).data('url'));\n      const inputData = { records: ids };\n\n      if (ids.length <= 0) {\n        alert(i18n._t('GRIDFIELD_BULK_MANAGER.BULKACTION_EMPTY_SELECT'));\n        return false;\n      }\n\n      // if ( $btn.hasClass('ss-ui-action-destructive') )\n      if (config[action].destructive) {\n        if (!confirm(i18n._t('GRIDFIELD_BULK_MANAGER.CONFIRM_DESTRUCTIVE_ACTION'))) {\n          return false;\n        }\n      }\n\n      $btn.addClass('loading');\n      $msg.removeClass('static show error warning');\n\n      if (config[action].xhr) {\n        $.ajax({\n          url,\n          data: inputData,\n          type: 'POST',\n          context: $(this)\n        }).always(function (data) {\n          let returnData = data;\n          $btn.removeClass('loading');\n\n          // if request fail, return a +4xx status code, extract json response\n          if (data.responseText) {\n            returnData = JSON.parse(data.responseText);\n          }\n\n          $msg.html(returnData.message);\n\n          if (returnData.isError) {\n            $msg.addClass('static error');\n          } else if (returnData.isWarning) {\n            $msg.addClass('show warning');\n          } else {\n            $msg.addClass('show');\n          }\n\n          bulkTools.gridfieldRefresh($(this).parents('.ss-gridfield'), returnData);\n        });\n      } else {\n        const records = `records[]=${ids.join('&records[]=')}`;\n        url = `${url}&${records}`;\n\n        window.location.href = url;\n      }\n\n      return true;\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/js/manager.js","/* global window */\nimport jQuery from 'jquery';\n\njQuery.entwine('colymba', ($) => {\n  /**\n   * Toggle all accordion forms\n   * open or closed\n   */\n  $('#bulkEditToggle').entwine({\n    onclick() {\n      const toggleFields = this.parents('form').find('.ss-toggle .ui-accordion-header');\n      let state = this.data('state');\n\n      if (!state || state === 'close') {\n        state = 'open';\n      } else {\n        state = 'close';\n      }\n\n      toggleFields.each(function () {\n        const $this = $(this);\n\n        if (state === 'open' && !$this.hasClass('ui-state-active')) {\n          $this.click();\n        }\n\n        if (state === 'close' && $this.hasClass('ui-state-active')) {\n          $this.click();\n        }\n      });\n\n      this.data('state', state);\n    }\n  });\n\n\n  /**\n   * Contains each rocrds editing fields,\n   * tracks changes and updates...\n   */\n  $('.bulkEditingFieldHolder').entwine({\n    onchange() {\n      this.removeClass('updated');\n      if (!this.hasClass('hasUpdate')) {\n        this.addClass('hasUpdate');\n      }\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/js/managerBulkEditingForm.js","/* global document window */\n/**\n * A quick hack to catch the uploadfield add file event\n * and send the file ID to the bulkUploader component\n * @todo  write actions\n */\nimport jQuery from 'jquery';\nimport Injector from 'lib/Injector';\n\nconst { bulkTools } = window;\n\nconst bulkUploadFieldAttach = (payload) => {\n  const $uploadField = jQuery(`#${payload.fieldId}`);\n  const $gridfield = $uploadField.parents('.ss-gridfield');\n  const schema = $uploadField.data('schema');\n  jQuery.ajax(schema.data.attachFileEndpoint.url, {\n    method: schema.data.attachFileEndpoint.method, // doesn't seem to change anything\n    data: {\n      fileID: payload.file.id\n    }\n  }).done((data) => {\n    bulkTools.gridfieldRefresh($gridfield, data);\n    // bulkTools.removeUploadItem($gridfield, null, payload.file.id);//bad! can't dispath in Reducer\n  });\n};\n\nconst bulkUploadFieldUpload = (payload) => {\n  const $gridfield = jQuery(`#${payload.fieldId}`).parents('.ss-gridfield');\n  bulkTools.gridfieldRefresh($gridfield, payload.json.bulkTools);\n  // bulkTools.removeUploadItem($gridfield, payload.queuedId, null);//bad! can't dispath in Reducer\n};\n\nconst bulkUploadFieldReducer = (originalReducer) => () => (state, { type, payload }) => {\n  switch (type) {\n    case 'UPLOADFIELD_ADD_FILE': {\n      // Needs to be a bulk upload field and have a file ID (no file ID = normal)\n      if (payload.fieldId.indexOf('_BU') !== -1 && payload.file.id) {\n        bulkUploadFieldAttach(payload);\n      }\n      return originalReducer(state, { type, payload });\n    }\n\n    case 'UPLOADFIELD_UPLOAD_SUCCESS': {\n      // check if this is a bulk upload\n      if (payload.fieldId.indexOf('_BU') !== -1) {\n        bulkUploadFieldUpload(payload);\n      }\n      return originalReducer(state, { type, payload });\n    }\n\n    default: {\n      return originalReducer(state, { type, payload });\n    }\n  }\n};\ndocument.addEventListener('DOMContentLoaded', () => {\n  Injector.transform('bulkUploaderTransformation', (updater) => {\n    updater.reducer('assetAdmin', bulkUploadFieldReducer);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/js/uploader.js","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 1\n// module chunks = 0","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}